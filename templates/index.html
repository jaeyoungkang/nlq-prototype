{% extends "layout.html" %}

{% block title %}채팅 - BigQuery AI Assistant{% endblock %}

{% block content %}
<div class="main-content">
    <!-- Chat Header -->
    <header class="chat-header">
        <div class="chat-header-info">
            <div class="chat-avatar">AI</div>
            <div>
                <h2 class="chat-title">데이터 분석 채팅</h2>
                <p class="chat-subtitle">BigQuery 데이터를 자연어로 분석하세요</p>
            </div>
        </div>
        
        <div class="chat-actions">
            <div class="status-indicator">
                <div class="status-dot" id="context-status-dot"></div>
                <span id="contextStatus">설정 확인 중...</span>
            </div>
        </div>
    </header>

    <!-- Messages Area -->
    <div class="messages-area" id="messagesArea">
        <div class="messages-container" id="messagesContainer">
            <!-- Messages will be displayed here -->
        </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
        <div class="input-container">
            <div class="input-wrapper">
                <textarea 
                    id="chatInput" 
                    class="input-textarea" 
                    placeholder="데이터에 대해 질문해보세요... (Shift+Enter로 줄바꿈)"
                    rows="1" 
                    disabled
                ></textarea>
                <button id="sendButton" class="send-button" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                    </svg>
                </button>
            </div>
            
            <!-- Quick Suggestions -->
            <div id="quickSuggestions" class="quick-suggestions hidden">
                <button class="suggestion-button" onclick="insertQuickQuestion('테이블 구조를 보여줘')">
                    📊 테이블 구조 보기
                </button>
                <button class="suggestion-button" onclick="insertQuickQuestion('데이터 요약 통계를 알려줘')">
                    📈 데이터 요약
                </button>
                <button class="suggestion-button" onclick="insertQuickQuestion('상위 10개 레코드를 보여줘')">
                    🔍 데이터 미리보기
                </button>
                <button class="suggestion-button" onclick="insertQuickQuestion('이 데이터로 어떤 분석이 가능해?')">
                    💡 분석 아이디어
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/chat.js"></script>
{% endblock %}